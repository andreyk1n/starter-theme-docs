@@include('partials/head.html')


<div class="wrapper">
    <div class="wrapper__container">
        @@include('partials/sidebar.html')
        <main class="content">
            <h1>Gulp-—Å—Ü–µ–Ω–∞—Ä—ñ–π –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏–∑–æ–≤–∞–Ω–æ—ó –∑–±—ñ—Ä–∫–∏ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥—É</h1>
            <p>
                <span>gulpfile.js</span> —É —Ü—å–æ–º—É –ø—Ä–æ—î–∫—Ç—ñ –≤–∏–∫–æ–Ω—É—î —Ä–æ–ª—å –∞–≤—Ç–æ–º–∞—Ç–∏–∑–æ–≤–∞–Ω–æ–≥–æ —ñ–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—É –∑–±—ñ—Ä–∫–∏. –í—ñ–Ω –¥–æ–∑–≤–æ–ª—è—î
                –ª–µ–≥–∫–æ –π —à–≤–∏–¥–∫–æ –æ–±—Ä–æ–±–ª—è—Ç–∏ HTML, CSS, JavaScript, –∑–æ–±—Ä–∞–∂–µ–Ω–Ω—è, –∞ —Ç–∞–∫–æ–∂ –ø—ñ–¥—Ç—Ä–∏–º—É—î live reload ‚Äî –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–µ
                –æ–Ω–æ–≤–ª–µ–Ω–Ω—è —Å—Ç–æ—Ä—ñ–Ω–∫–∏ –ø—Ä–∏ –∑–º—ñ–Ω—ñ —Ñ–∞–π–ª—ñ–≤. –£—Å–µ —Ü–µ –≤—ñ–¥–±—É–≤–∞—î—Ç—å—Å—è –∑ –º—ñ–Ω—ñ–º—ñ–∑–∞—Ü—ñ—î—é –∫–æ–¥—É, –ø—ñ–¥—Ç—Ä–∏–º–∫–æ—é —ñ–Ω–∫–ª—É–¥—ñ–≤ —Ç–∞
                —à–∞–±–ª–æ–Ω–Ω–∏—Ö –∫–æ–Ω—Å—Ç—Ä—É–∫—Ü—ñ–π –¥–ª—è –∑–æ–±—Ä–∞–∂–µ–Ω—å. –°–∏—Å—Ç–µ–º–∞ —Ç–∞–∫–æ–∂ –ø–æ–¥–±–∞—î –ø—Ä–æ —Å—Ç—Ä—É–∫—Ç—É—Ä—É —Ç–∞ –ø–µ—Ä–µ–Ω–µ—Å–µ–Ω–Ω—è —Ñ–∞–π–ª—ñ–≤ —É —Ñ—ñ–Ω–∞–ª—å–Ω—É
                –ø–∞–ø–∫—É <span>dist</span>, –∑–±–µ—Ä—ñ–≥–∞—é—á–∏ –∑—Ä—É—á–Ω—É —ñ —á–∏—Å—Ç—É –æ—Ä–≥–∞–Ω—ñ–∑–∞—Ü—ñ—é.
            </p>

            <h2 data-anchors="structure-project">–°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ—î–∫—Ç—É</h2>
            <p>
                –£ –ø–∞–ø—Ü—ñ <span>src</span> –∑–±–µ—Ä—ñ–≥–∞—é—Ç—å—Å—è –≤–∏—Ö—ñ–¥–Ω—ñ —Ñ–∞–π–ª–∏. HTML-—Ñ–∞–π–ª–∏ —Ä–æ–∑–º—ñ—â—É—é—Ç—å—Å—è –≤ <span>src/html/</span> —ñ
                –ø—ñ–¥—Ç—Ä–∏–º—É—é—Ç—å <span>@@include</span> –¥–ª—è –ø–æ–≤—Ç–æ—Ä–Ω–æ–≥–æ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ñ–≤. –°—Ç–∏–ª—ñ –ø–∏—à—É—Ç—å—Å—è —É —Ñ–æ—Ä–º–∞—Ç—ñ
                SCSS —Ç–∞ –∑–Ω–∞—Ö–æ–¥—è—Ç—å—Å—è —É <span>src/scss/</span>. –û—Å–Ω–æ–≤–Ω–∏–π JavaScript-—Ñ–∞–π–ª, —â–æ —Ä–æ–∑–º—ñ—â—É—î—Ç—å—Å—è —É
                <span>src/js/app.js</span>, –Ω–µ –º—ñ–Ω—ñ–º—ñ–∑—É—î—Ç—å—Å—è, —â–æ –∑—Ä—É—á–Ω–æ –Ω–∞ –µ—Ç–∞–ø—ñ —Ä–æ–∑—Ä–æ–±–∫–∏. –î–æ–¥–∞—Ç–∫–æ–≤—ñ –º–æ–¥—É–ª—ñ –∑–±–µ—Ä—ñ–≥–∞—é—Ç—å—Å—è
                –≤ <span>src/js/functions/</span> —ñ –º—ñ–Ω—ñ—Ñ—ñ–∫—É—é—Ç—å—Å—è. –ó–æ–±—Ä–∞–∂–µ–Ω–Ω—è –∑ <span>src/images/</span> –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ
                –∫–æ–ø—ñ—é—é—Ç—å—Å—è –¥–æ <span>dist/images/</span>.
            </p>

            <h2 data-anchors="possibility">–û—Å–Ω–æ–≤–Ω—ñ –º–æ–∂–ª–∏–≤–æ—Å—Ç—ñ —Ç–∞ –µ—Ç–∞–ø–∏</h2>

            <h3>1. –û—á–∏—â–µ–Ω–Ω—è</h3>
            <p>
                –ü–µ—Ä–µ–¥ –∫–æ–∂–Ω–æ—é –Ω–æ–≤–æ—é –∑–±—ñ—Ä–∫–æ—é –≤–∏–¥–∞–ª—è—î—Ç—å—Å—è –ø–∞–ø–∫–∞ <span>dist</span>. –¶–µ –≥–∞—Ä–∞–Ω—Ç—É—î, —â–æ –∂–æ–¥–Ω—ñ –∑–∞—Å—Ç–∞—Ä—ñ–ª—ñ –∞–±–æ
                –∑–∞–π–≤—ñ —Ñ–∞–π–ª–∏ –Ω–µ –ø–æ—Ç—Ä–∞–ø–ª—è—Ç—å —É —Ñ—ñ–Ω–∞–ª—å–Ω—É –≤–µ—Ä—Å—ñ—é.
            </p>

            <h3>2. –û–±—Ä–æ–±–∫–∞ HTML</h3>
            <p>
                HTML-—Ñ–∞–π–ª–∏ –ø—ñ–¥—Ç—Ä–∏–º—É—é—Ç—å —à–∞–±–ª–æ–Ω–Ω—ñ –∫–æ–Ω—Å—Ç—Ä—É–∫—Ü—ñ—ó ‚Äî <span>@@include</span> –¥–ª—è –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ñ–≤ —ñ —Å–ø–µ—Ü—ñ–∞–ª—å–Ω–∏–π
                —Å–∏–Ω—Ç–∞–∫—Å–∏—Å <span>@img/</span> –∞–±–æ <span>@bgimg/</span> –¥–ª—è –≤—Å—Ç–∞–≤–∫–∏ –∑–æ–±—Ä–∞–∂–µ–Ω—å. –£—Å—ñ –æ–±—Ä–æ–±–ª–µ–Ω—ñ —Ñ–∞–π–ª–∏
                –∑–±–µ—Ä—ñ–≥–∞—é—Ç—å—Å—è –≤ <span>dist/</span>, –∞ –∑–º—ñ–Ω–∏ –≤—ñ–¥–æ–±—Ä–∞–∂–∞—é—Ç—å—Å—è –≤ –±—Ä–∞—É–∑–µ—Ä—ñ –º–∏—Ç—Ç—î–≤–æ.
            </p>

            <h3>3. –ö–æ–º–ø—ñ–ª—è—Ü—ñ—è SCSS —É CSS</h3>
            <p>
                –°—Ç–∏–ª—ñ –ø–∏—à—É—Ç—å—Å—è –≤ SCSS —ñ –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –∫–æ–º–ø—ñ–ª—é—é—Ç—å—Å—è —É CSS, —è–∫–∏–π –¥–æ–¥–∞—Ç–∫–æ–≤–æ –º—ñ–Ω—ñ–º—ñ–∑—É—î—Ç—å—Å—è. –ì–æ—Ç–æ–≤—ñ —Ñ–∞–π–ª–∏ –º–∞—é—Ç—å
                —Å—É—Ñ—ñ–∫—Å <span>.min</span>, —â–æ –¥–æ–∑–≤–æ–ª—è—î –ª–µ–≥–∫–æ —ó—Ö –≤—ñ–¥—Ä—ñ–∑–Ω–∏—Ç–∏. –ü—ñ—Å–ª—è –∫–æ–∂–Ω–æ—ó –∑–º—ñ–Ω–∏ CSS —Å—Ç–æ—Ä—ñ–Ω–∫–∞ –æ–¥—Ä–∞–∑—É
                –æ–Ω–æ–≤–ª—é—î—Ç—å—Å—è.
            </p>

            <h3>4. JavaScript</h3>
            <p>
                –ì–æ–ª–æ–≤–Ω–∏–π —Å–∫—Ä–∏–ø—Ç <span>app.js</span> –∫–æ–ø—ñ—é—î—Ç—å—Å—è –±–µ–∑ –∑–º—ñ–Ω, —â–æ –∑—Ä—É—á–Ω–æ –ø—ñ–¥ —á–∞—Å —Ä–æ–∑—Ä–æ–±–∫–∏. –í—Å—ñ –¥—Ä—ñ–±–Ω—ñ –º–æ–¥—É–ª—ñ –∑
                –ø–∞–ø–∫–∏ <span>functions</span> –ø—Ä–æ—Ö–æ–¥—è—Ç—å –º—ñ–Ω—ñ–º—ñ–∑–∞—Ü—ñ—é, —â–æ –¥–æ–∑–≤–æ–ª—è—î —Å—Ç—Ä—É–∫—Ç—É—Ä—É–≤–∞—Ç–∏ –∫–æ–¥ —ñ –∑–º–µ–Ω—à–∏—Ç–∏ —Ä–æ–∑–º—ñ—Ä
                —Ñ—ñ–Ω–∞–ª—å–Ω–æ–≥–æ —Ñ–∞–π–ª—É.
            </p>

            <h3>5. –ó–æ–±—Ä–∞–∂–µ–Ω–Ω—è</h3>
            <p>
                –í—Å—ñ —Ñ–∞–π–ª–∏ –∑ <span>src/images/</span> –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –∫–æ–ø—ñ—é—é—Ç—å—Å—è –¥–æ <span>dist/images/</span>. –£ –∫–æ–¥—ñ –º–æ–∂–Ω–∞
                –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ —Å–∫–æ—Ä–æ—á–µ–Ω–∏–π —Å–∏–Ω—Ç–∞–∫—Å–∏—Å <span>@img/</span> –¥–ª—è —Å–ø—Ä–æ—â–µ–Ω–Ω—è —à–ª—è—Ö—É –¥–æ –∑–æ–±—Ä–∞–∂–µ–Ω–Ω—è.
            </p>

            <h3>6. –ì–µ–Ω–µ—Ä–∞—Ü—ñ—è sitemap</h3>
            <p>
                –£—Å—ñ HTML-—Å—Ç–æ—Ä—ñ–Ω–∫–∏ —É <span>dist/</span> –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ —Å–∫–∞–Ω—É—é—Ç—å—Å—è, –Ω–∞ –æ—Å–Ω–æ–≤—ñ —á–æ–≥–æ —Ñ–æ—Ä–º—É—î—Ç—å—Å—è
                <span>sitemap.html</span> ‚Äî —Ü–µ –∑—Ä—É—á–Ω–æ –¥–ª—è —à–≤–∏–¥–∫–æ—ó –Ω–∞–≤—ñ–≥–∞—Ü—ñ—ó —Ç–∞ –ø–æ—à—É–∫–æ–≤–∏—Ö —Å–∏—Å—Ç–µ–º.
            </p>

            <h3>7. Live Reload —ñ Watch</h3>
            <p>
                –ü—ñ—Å–ª—è –∑–∞–ø—É—Å–∫—É —Å—Ç–≤–æ—Ä—é—î—Ç—å—Å—è –ª–æ–∫–∞–ª—å–Ω–∏–π —Å–µ—Ä–≤–µ—Ä –Ω–∞ –±–∞–∑—ñ <span>dist</span>. –£—Å—ñ –∑–º—ñ–Ω–∏ –≤ HTML, SCSS, JavaScript
                –∞–±–æ –∑–æ–±—Ä–∞–∂–µ–Ω–Ω—è—Ö –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –≤—ñ–¥—Å–ª—ñ–¥–∫–æ–≤—É—é—Ç—å—Å—è. –ü—ñ—Å–ª—è –∑–º—ñ–Ω–∏ —Ñ–∞–π–ª—É –≤—ñ–¥–ø–æ–≤—ñ–¥–Ω–∏–π —Ç–∞—Å–∫ –≤–∏–∫–æ–Ω—É—î—Ç—å—Å—è, —ñ –±—Ä–∞—É–∑–µ—Ä
                –æ–Ω–æ–≤–ª—é—î—Ç—å—Å—è –±–µ–∑ –≤—Ç—Ä—É—á–∞–Ω–Ω—è –≤—Ä—É—á–Ω—É.
            </p>

            <h2 data-anchors="main-command">–û—Å–Ω–æ–≤–Ω–∞ –∫–æ–º–∞–Ω–¥–∞ –∑–∞–ø—É—Å–∫—É</h2>
            <p>
                –©–æ–± —Ä–æ–∑–ø–æ—á–∞—Ç–∏ —Ä–æ–±–æ—Ç—É, –¥–æ—Å—Ç–∞—Ç–Ω—å–æ –≤–∏–∫–æ–Ω–∞—Ç–∏ –∫–æ–º–∞–Ω–¥—É:
            </p>
            <div class="code">
                <button class="copy-button" onclick="copyCode(this)">–°–∫–æ–ø—ñ—é–≤–∞—Ç–∏</button>
                <pre><code>
gulp
  </code></pre>
            </div>
            <p>
                –í–æ–Ω–∞ –æ—á–∏—â—É—î —Ñ—ñ–Ω–∞–ª—å–Ω—É –ø–∞–ø–∫—É, –æ–±—Ä–æ–±–ª—è—î HTML, CSS, JavaScript —Ç–∞ –∑–æ–±—Ä–∞–∂–µ–Ω–Ω—è, –≥–µ–Ω–µ—Ä—É—î –∫–∞—Ä—Ç—É —Å–∞–π—Ç—É,
                –∑–∞–ø—É—Å–∫–∞—î
                —Å–µ—Ä–≤–µ—Ä —ñ —Å–ª—ñ–¥–∫—É—î –∑–∞ –≤—Å—ñ–º–∞ –∑–º—ñ–Ω–∞–º–∏ –≤ —Ä–µ–∞–ª—å–Ω–æ–º—É —á–∞—Å—ñ.
            </p>

            <h2 data-anchors="why-its">–î–ª—è —á–æ–≥–æ —Ü–µ –≤—Å–µ?</h2>
            <p>
                –¶–µ–π —Å—Ü–µ–Ω–∞—Ä—ñ–π Gulp –¥–æ–ø–æ–º–∞–≥–∞—î —à–≤–∏–¥–∫–æ —Å—Ç–∞—Ä—Ç—É–≤–∞—Ç–∏ –Ω–æ–≤–∏–π —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥-–ø—Ä–æ—î–∫—Ç, –∑–∞–±–µ–∑–ø–µ—á—É—é—á–∏ –∑—Ä—É—á–Ω—É —Å—Ç—Ä—É–∫—Ç—É—Ä—É –∑
                –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–Ω–∏–º HTML-–ø—ñ–¥—Ö–æ–¥–æ–º. –í—ñ–Ω –¥–æ–∑–≤–æ–ª—è—î –ø—Ä–∞—Ü—é–≤–∞—Ç–∏ —É live-—Ä–µ–∂–∏–º—ñ, –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –æ–Ω–æ–≤–ª—é—é—á–∏ —Å—Ç–æ—Ä—ñ–Ω–∫—É,
                –æ–ø—Ç–∏–º—ñ–∑—É—î –≤—Å—ñ —Ä–µ—Å—É—Ä—Å–∏ —á–µ—Ä–µ–∑ –º—ñ–Ω—ñ—Ñ—ñ–∫–∞—Ü—ñ—é —Ç–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –∫–µ—Ä—É—î –∑–æ–±—Ä–∞–∂–µ–Ω–Ω—è–º–∏ —Ç–∞ –∫–∞—Ä—Ç–∫–æ—é —Å–∞–π—Ç—É. –¶–µ
                –∑–Ω–∞—á–Ω–æ
                —Å–∫–æ—Ä–æ—á—É—î —á–∞—Å –Ω–∞ —Ä—É—Ç–∏–Ω–Ω—ñ –∑–∞–¥–∞—á—ñ —Ç–∞ –ø–æ–∫—Ä–∞—â—É—î –∑–∞–≥–∞–ª—å–Ω–∏–π workflow.
            </p>

            <h2 data-anchors="all-code">–í–µ—Å—å –∫–æ–¥</h2>
            <div class="code">
                <button class="copy-button" onclick="copyCode(this)">–°–∫–æ–ø—ñ—é–≤–∞—Ç–∏</button>
                <pre><code>
// –Ü–º–ø–æ—Ä—Ç—É—î–º–æ –Ω–µ–æ–±—Ö—ñ–¥–Ω—ñ –ø–∞–∫–µ—Ç–∏
const gulp = require('gulp'); // –û—Å–Ω–æ–≤–Ω–∏–π Gulp
const fileInclude = require('gulp-file-include'); // –î–æ–∑–≤–æ–ª—è—î –≤—Å—Ç–∞–≤–ª—è—Ç–∏ —á–∞—Å—Ç–∏–Ω–∏ HTML –∑–∞ –¥–æ–ø–æ–º–æ–≥–æ—é @@include
const sass = require('gulp-sass')(require('sass')); // –ö–æ–º–ø—ñ–ª—è—Ç–æ—Ä SCSS —É CSS
const cleanCSS = require('gulp-clean-css'); // –ú—ñ–Ω—ñ—Ñ—ñ–∫–∞—Ü—ñ—è CSS
const rename = require('gulp-rename'); // –ü–µ—Ä–µ–π–º–µ–Ω—É–≤–∞–Ω–Ω—è —Ñ–∞–π–ª—ñ–≤
const browserSync = require('browser-sync').create(); // –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–µ –æ–Ω–æ–≤–ª–µ–Ω–Ω—è –±—Ä–∞—É–∑–µ—Ä–∞ –ø—Ä–∏ –∑–º—ñ–Ω–∞—Ö
const uglify = require('gulp-uglify'); // –ú—ñ–Ω—ñ—Ñ—ñ–∫–∞—Ü—ñ—è JavaScript
const plumber = require('gulp-plumber'); // –ó–∞–ø–æ–±—ñ–≥–∞—î –∑—É–ø–∏–Ω—Ü—ñ Gulp –ø—Ä–∏ –ø–æ–º–∏–ª–∫–∞—Ö
const fs = require('fs'); // –†–æ–±–æ—Ç–∞ –∑ —Ñ–∞–π–ª–æ–≤–æ—é —Å–∏—Å—Ç–µ–º–æ—é (–≤–±—É–¥–æ–≤–∞–Ω–∏–π –º–æ–¥—É–ª—å Node.js)
const path = require('path'); // –†–æ–±–æ—Ç–∞ –∑ —à–ª—è—Ö–∞–º–∏ (–≤–±—É–¥–æ–≤–∞–Ω–∏–π –º–æ–¥—É–ª—å Node.js)
const through2 = require('through2'); // –û–±—Ä–æ–±–∫–∞ –ø–æ—Ç–æ–∫—ñ–≤ (–¥–ª—è sitemap)
const copy = require('gulp-copy'); // –î–ª—è –∫–æ–ø—ñ—é–≤–∞–Ω–Ω—è —Ñ–∞–π–ª—ñ–≤

// –û—á–∏—â–µ–Ω–Ω—è –¥–∏—Ä–µ–∫—Ç–æ—Ä—ñ—ó dist –ø–µ—Ä–µ–¥ –∑–±—ñ—Ä–∫–æ—é
// del ‚Äî ES-–º–æ–¥—É–ª—å, —Ç–æ–º—É —ñ–º–ø–æ—Ä—Ç—É—î–º–æ –¥–∏–Ω–∞–º—ñ—á–Ω–æ
async function clean() {
  const del = (await import('del')).deleteAsync;
  return del('dist'); // –í–∏–¥–∞–ª—è—î–º–æ –ø–∞–ø–∫—É dist
}

// –®–ª—è—Ö–∏ –¥–æ –≤—Ö—ñ–¥–Ω–∏—Ö/–≤–∏—Ö—ñ–¥–Ω–∏—Ö —Ñ–∞–π–ª—ñ–≤
const paths = {
  html: {
    src: 'src/html/pages/*.html', // HTML-—Å—Ç–æ—Ä—ñ–Ω–∫–∏
    watch: 'src/html/**/*.html',  // –í—Å—ñ HTML-—Ñ–∞–π–ª–∏ –¥–ª—è –≤—ñ–¥—Å–ª—ñ–¥–∫–æ–≤—É–≤–∞–Ω–Ω—è –∑–º—ñ–Ω
    dest: 'dist/' // –ö—É–¥–∏ –∑–±–µ—Ä—ñ–≥–∞—Ç–∏ HTML
  },
  styles: {
    src: 'src/scss/**/*.scss', // –í—Å—ñ SCSS-—Ñ–∞–π–ª–∏
    dest: 'dist/css/' // –ö—É–¥–∏ –∑–±–µ—Ä—ñ–≥–∞—Ç–∏ –∑–∫–æ–º–ø—ñ–ª—å–æ–≤–∞–Ω—ñ CSS
  },
  scripts: {
    app: 'src/js/app.js', // –û—Å–Ω–æ–≤–Ω–∏–π JS-—Ñ–∞–π–ª
    appDest: 'dist/js/', // –ö—É–¥–∏ –∫–æ–ø—ñ—é–≤–∞—Ç–∏ app.js
    functions: 'src/js/functions/**/*.js', // –£—Å—ñ –¥—Ä—ñ–±–Ω—ñ JS-—Ñ—É–Ω–∫—Ü—ñ—ó
    functionsDest: 'dist/js/functions/' // –ö—É–¥–∏ –∫–æ–ø—ñ—é–≤–∞—Ç–∏ –º—ñ–Ω—ñ–º—ñ–∑–æ–≤–∞–Ω—ñ —Ñ—É–Ω–∫—Ü—ñ—ó
  },
  images: {
    src: 'src/images/**/*.*', // –í—Å—ñ –∑–æ–±—Ä–∞–∂–µ–Ω–Ω—è
    dest: 'dist/images/' // –ö—É–¥–∏ –∫–æ–ø—ñ—é–≤–∞—Ç–∏ –∑–æ–±—Ä–∞–∂–µ–Ω–Ω—è
  }
};

// –û–±—Ä–æ–±–∫–∞ –∫–∞—Å—Ç–æ–º–Ω–∏—Ö –¥–∏—Ä–µ–∫—Ç–∏–≤ @@img("...") —Ç–∞ @@bgimg("...") –≤ HTML-—Ñ–∞–π–ª–∞—Ö
function replaceAliases() {
  return through2.obj(function (file, _, cb) {
    if (file.isBuffer()) {
      let content = file.contents.toString();

      // –ó–∞–º—ñ–Ω–∞ @img/filename.jpg ‚Üí images/filename.jpg
      content = content.replace(/@img\//g, './images/');

      // –ó–∞–º—ñ–Ω–∞ @bgimg/filename.jpg ‚Üí background-image: url('images/filename.jpg');
      content = content.replace(/@bgimg\/([^)'" ]+)/g, "background-image: url('./images/$1')");

      file.contents = Buffer.from(content);
    }
    cb(null, file);
  });
}

// –û–±—Ä–æ–±–∫–∞ HTML-—Ñ–∞–π–ª—ñ–≤ —ñ–∑ –ø—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è–º include'—ñ–≤
function html() {
  console.log('\x1b[36m%s\x1b[0m', 'üìÑ HTML –æ–±—Ä–æ–±–ª—è—î—Ç—å—Å—è...');
  return gulp.src(paths.html.src)
    .pipe(fileInclude({ prefix: '@@', basepath: 'src/html/' })) // –ü–æ—à—É–∫ @@include
    .pipe(replaceAliases()) // –ó–∞–º—ñ–Ω–∞ @img/ —Ç–∞ @bgimg
    .pipe(gulp.dest(paths.html.dest)) // –ó–∞–ø–∏—Å —É dist
    .pipe(browserSync.stream()); // –û–Ω–æ–≤–ª–µ–Ω–Ω—è —Å—Ç–æ—Ä—ñ–Ω–∫–∏
}

// –ì–µ–Ω–µ—Ä–∞—Ü—ñ—è sitemap.html –Ω–∞ –æ—Å–Ω–æ–≤—ñ –≤—Å—ñ—Ö HTML-—Å—Ç–æ—Ä—ñ–Ω–æ–∫
function sitemap(cb) {
  const links = [];

  // –ó–Ω–∞—Ö–æ–¥–∏–º–æ –≤—Å—ñ HTML-—Ñ–∞–π–ª–∏ –≤ dist
  gulp.src('dist/**/*.html', { read: false })
    .pipe(through2.obj(function (file, _, callback) {
      const relativePath = path.relative('dist', file.path).replace(/\\/g, '/');
      if (relativePath !== 'sitemap.html') {
        links.push(`<li><a href="${relativePath}">${relativePath}</a></li>`);
      }
      callback();
    }, function (callback) {
      // –§–æ—Ä–º—É—î–º–æ HTML –¥–ª—è sitemap
      const html = `<!DOCTYPE html>
<html lang="uk">
<head>
  <meta charset="UTF-8">
  <title>–ö–∞—Ä—Ç–∞ —Å–∞–π—Ç—É</title>
  <style>
    body { font-family: sans-serif; padding: 2rem; background: #f9f9f9; }
    ul { line-height: 1.8; }
    a { color: #007acc; text-decoration: none; }
    a:hover { text-decoration: underline; }
  </style>
</head>
<body>
  <h1>–ö–∞—Ä—Ç–∞ —Å–∞–π—Ç—É</h1>
  <ul>${links.join('\n')}</ul>
</body>
</html>`.trim();

      fs.writeFileSync('dist/sitemap.html', html); // –°—Ç–≤–æ—Ä—é—î–º–æ sitemap
      console.log('\x1b[36m%s\x1b[0m', 'üó∫Ô∏è  sitemap.html –æ–Ω–æ–≤–ª–µ–Ω–æ!');
      callback();
      cb(); // –ó–∞–≤–µ—Ä—à—É—î–º–æ —Ç–∞—Å–∫
    }));
}

// –ö–æ–º–ø—ñ–ª—è—Ü—ñ—è SCSS ‚Üí CSS, –º—ñ–Ω—ñ—Ñ—ñ–∫–∞—Ü—ñ—è —ñ –ø–µ—Ä–µ–π–º–µ–Ω—É–≤–∞–Ω–Ω—è
function styles() {
  console.log('\x1b[35m%s\x1b[0m', 'üé® SCSS –∫–æ–º–ø—ñ–ª—é—î—Ç—å—Å—è...');
  return gulp.src(paths.styles.src)
    .pipe(sass().on('error', sass.logError)) // –ö–æ–º–ø—ñ–ª—è—Ü—ñ—è SCSS
    .pipe(cleanCSS()) // –ú—ñ–Ω—ñ—Ñ—ñ–∫–∞—Ü—ñ—è
    .pipe(rename({ suffix: '.min' })) // –î–æ–¥–∞—î–º–æ .min –¥–æ –Ω–∞–∑–≤–∏
    .pipe(gulp.dest(paths.styles.dest)) // –ó–∞–ø–∏—Å —É dist/css
    .pipe(browserSync.stream()); // –û–Ω–æ–≤–ª–µ–Ω–Ω—è —Å—Ç–æ—Ä—ñ–Ω–∫–∏
}

// –ö–æ–ø—ñ—é–≤–∞–Ω–Ω—è app.js –±–µ–∑ –º—ñ–Ω—ñ–º—ñ–∑–∞—Ü—ñ—ó
function jsApp() {
  console.log('\x1b[33m%s\x1b[0m', 'üß© jsApp –∫–æ–ø—ñ—é—î—Ç—å—Å—è –±–µ–∑ –º—ñ–Ω—ñ–º—ñ–∑–∞—Ü—ñ—ó...');
  return gulp.src(paths.scripts.app)
    .pipe(gulp.dest(paths.scripts.appDest))
    .pipe(browserSync.stream());
}

// –ú—ñ–Ω—ñ—Ñ—ñ–∫–∞—Ü—ñ—è —Ñ—É–Ω–∫—Ü—ñ–æ–Ω–∞–ª—å–Ω–∏—Ö JS-—Ñ–∞–π–ª—ñ–≤
function jsFunctions() {
  console.log('\x1b[32m%s\x1b[0m', '‚öôÔ∏è jsFunctions –º—ñ–Ω—ñ–º—ñ–∑—É—î—Ç—å—Å—è...');
  return gulp.src(paths.scripts.functions)
    .pipe(plumber()) // –ó–∞–ø–æ–±—ñ–≥–∞–Ω–Ω—è –∑—É–ø–∏–Ω—Ü—ñ –ø—Ä–∏ –ø–æ–º–∏–ª–∫–∞—Ö
    .pipe(uglify()) // –ú—ñ–Ω—ñ—Ñ—ñ–∫–∞—Ü—ñ—è
    .pipe(gulp.dest(paths.scripts.functionsDest))
    .pipe(browserSync.stream());
}

// –ö–æ–ø—ñ—é–≤–∞–Ω–Ω—è –∑–æ–±—Ä–∞–∂–µ–Ω—å —É dist
function images() {
  console.log('\x1b[34m%s\x1b[0m', 'üñºÔ∏è –ó–æ–±—Ä–∞–∂–µ–Ω–Ω—è –∫–æ–ø—ñ—é—é—Ç—å—Å—è...');
  return gulp.src(paths.images.src)
    .pipe(copy(paths.images.dest, { prefix: 2 })) // –ö–æ–ø—ñ—é—î–º–æ –∑–æ–±—Ä–∞–∂–µ–Ω–Ω—è –¥–æ dist/images
    .pipe(browserSync.stream())
    .on('end', () => console.log('–ó–æ–±—Ä–∞–∂–µ–Ω–Ω—è —É—Å–ø—ñ—à–Ω–æ —Å–∫–æ–ø—ñ–π–æ–≤–∞–Ω–æ!'));
}

// –í—ñ–¥—Å–ª—ñ–¥–∫–æ–≤—É–≤–∞–Ω–Ω—è –∑–º—ñ–Ω —ñ live-reload —É –±—Ä–∞—É–∑–µ—Ä—ñ
function watch() {
  browserSync.init({
    server: {
      baseDir: './dist' // –ó–∞–ø—É—Å–∫–∞—î–º–æ –ª–æ–∫–∞–ª—å–Ω–∏–π —Å–µ—Ä–≤–µ—Ä –∑ –ø–∞–ø–∫–∏ dist
    }
  });

  // –°–ø–æ—Å—Ç–µ—Ä–µ–∂–µ–Ω–Ω—è –∑–∞ –≤—Å—ñ–º–∞ —Ñ–∞–π–ª–∞–º–∏
  gulp.watch(paths.html.watch, gulp.series(html, sitemap)); // HTML + sitemap
  gulp.watch(paths.styles.src, styles); // SCSS
  gulp.watch(paths.scripts.app, jsApp); // JS app
  gulp.watch(paths.scripts.functions, jsFunctions); // JS —Ñ—É–Ω–∫—Ü—ñ—ó
  gulp.watch(paths.images.src, images); // –ó–æ–±—Ä–∞–∂–µ–Ω–Ω—è

  console.log('\x1b[44m%s\x1b[0m', 'üëÄ Gulp —Å–ª—ñ–¥–∫—É—î –∑–∞ —Ñ–∞–π–ª–∞–º–∏...');
}

// –û—Å–Ω–æ–≤–Ω–µ –∑–∞–≤–¥–∞–Ω–Ω—è –∑–∞ –∑–∞–º–æ–≤—á—É–≤–∞–Ω–Ω—è–º: –æ—á–∏—â–µ–Ω–Ω—è ‚Üí –ø–∞—Ä–∞–ª–µ–ª—å–Ω–∞ –æ–±—Ä–æ–±–∫–∞ ‚Üí sitemap ‚Üí —Å–ø–æ—Å—Ç–µ—Ä–µ–∂–µ–Ω–Ω—è
exports.default = gulp.series(
  clean,
  gulp.parallel(html, styles, jsApp, jsFunctions, images),
  sitemap,
  watch
);
  </code></pre>
            </div>
        </main>
        <div id="anchors" class="anchors"></div>
    </div>
</div>
</div>

<script>
    function sanitizeAllCodeBlocks() {
        const codeBlocks = document.querySelectorAll('pre code');

        codeBlocks.forEach(function (codeBlock) {
            let codeContent = codeBlock.innerHTML;

            // –ó–∞–º—ñ–Ω—é—î–º–æ < –Ω–∞ &lt; —ñ > –Ω–∞ &gt;
            codeContent = codeContent.replace(/</g, '&lt;').replace(/>/g, '&gt;');

            // –û–Ω–æ–≤–ª—é—î–º–æ –≤–º—ñ—Å—Ç –∫–æ–∂–Ω–æ–≥–æ –±–ª–æ–∫—É <code>
            codeBlock.innerHTML = codeContent;
        });
    }

    window.onload = sanitizeAllCodeBlocks;
</script>

@@include('partials/footer.html')